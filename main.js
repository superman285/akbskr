!function(e){function t(t){for(var n,o,s=t[0],r=t[1],a=t[2],c=0,u=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(C,o)&&C[o]&&u.push(C[o][0]),C[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(k&&k(t);u.length;)u.shift()();return D.push.apply(D,a||[]),i()}function i(){for(var e,t=0;t<D.length;t++){for(var i=D[t],n=!0,o=1;o<i.length;o++){var s=i[o];0!==C[s]&&(n=!1)}n&&(D.splice(t--,1),e=R(R.s=i[0]))}return e}var n=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!w[e]||!x[e])return;for(var i in x[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(m[i]=t[i]);0==--b&&0===M&&O()}(e,t),n&&n(e,t)};var o,s=!0,r="c7c9195c69a5a0e7ba43",a={},c=[],u=[];function h(t){var i={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:o!==t,active:!0,accept:function(e,t){if(void 0===e)i._selfAccepted=!0;else if("function"==typeof e)i._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)i._acceptedDependencies[e[n]]=t||function(){};else i._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)i._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)i._declinedDependencies[e[t]]=!0;else i._declinedDependencies[e]=!0},dispose:function(e){i._disposeHandlers.push(e)},addDisposeHandler:function(e){i._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=i._disposeHandlers.indexOf(e);t>=0&&i._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,p){case"idle":(m={})[t]=e[t],l("ready");break;case"ready":E(t);break;case"prepare":case"check":case"dispose":case"apply":(g=g||[]).push(t)}},check:_,apply:P,status:function(e){if(!e)return p;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var t=d.indexOf(e);t>=0&&d.splice(t,1)},data:a[t]};return o=void 0,i}var d=[],p="idle";function l(e){p=e;for(var t=0;t<d.length;t++)d[t].call(null,e)}var f,m,y,g,b=0,M=0,v={},x={},w={};function z(e){return+e+""===e?+e:e}function _(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return s=e,l("check"),(t=1e4,t=t||1e4,new Promise((function(e,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var n=new XMLHttpRequest,o=R.p+""+r+".hot-update.json";n.open("GET",o,!0),n.timeout=t,n.send(null)}catch(e){return i(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)i(new Error("Manifest request to "+o+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)i(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void i(e)}e(t)}}}))).then((function(e){if(!e)return l(I()?"ready":"idle"),null;x={},v={},w=e.c,y=e.h,l("prepare");var t=new Promise((function(e,t){f={resolve:e,reject:t}}));for(var i in m={},C)j(i);return"prepare"===p&&0===M&&0===b&&O(),t}));var t}function j(e){w[e]?(x[e]=!0,b++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=R.p+""+e+"."+r+".hot-update.js",document.head.appendChild(t)}(e)):v[e]=!0}function O(){l("ready");var e=f;if(f=null,e)if(s)Promise.resolve().then((function(){return P(s)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&t.push(z(i));e.resolve(t)}}function P(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");return function t(i){var n,s,u,h,d;function p(e){for(var t=[e],i={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var o=n.pop(),s=o.id,r=o.chain;if((h=S[s])&&(!h.hot._selfAccepted||h.hot._selfInvalidated)){if(h.hot._selfDeclined)return{type:"self-declined",chain:r,moduleId:s};if(h.hot._main)return{type:"unaccepted",chain:r,moduleId:s};for(var a=0;a<h.parents.length;a++){var c=h.parents[a],u=S[c];if(u){if(u.hot._declinedDependencies[s])return{type:"declined",chain:r.concat([c]),moduleId:s,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[s]?(i[c]||(i[c]=[]),f(i[c],[s])):(delete i[c],t.push(c),n.push({chain:r.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];-1===e.indexOf(n)&&e.push(n)}}I();var b={},M=[],v={},x=function(){console.warn("[HMR] unexpected require("+j.moduleId+") to disposed module")};for(var _ in m)if(Object.prototype.hasOwnProperty.call(m,_)){var j;d=z(_),j=m[_]?p(d):{type:"disposed",moduleId:_};var O=!1,P=!1,E=!1,D="";switch(j.chain&&(D="\nUpdate propagation: "+j.chain.join(" -> ")),j.type){case"self-declined":i.onDeclined&&i.onDeclined(j),i.ignoreDeclined||(O=new Error("Aborted because of self decline: "+j.moduleId+D));break;case"declined":i.onDeclined&&i.onDeclined(j),i.ignoreDeclined||(O=new Error("Aborted because of declined dependency: "+j.moduleId+" in "+j.parentId+D));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(j),i.ignoreUnaccepted||(O=new Error("Aborted because "+d+" is not accepted"+D));break;case"accepted":i.onAccepted&&i.onAccepted(j),P=!0;break;case"disposed":i.onDisposed&&i.onDisposed(j),E=!0;break;default:throw new Error("Unexception type "+j.type)}if(O)return l("abort"),Promise.reject(O);if(P)for(d in v[d]=m[d],f(M,j.outdatedModules),j.outdatedDependencies)Object.prototype.hasOwnProperty.call(j.outdatedDependencies,d)&&(b[d]||(b[d]=[]),f(b[d],j.outdatedDependencies[d]));E&&(f(M,[j.moduleId]),v[d]=x)}var A,H=[];for(s=0;s<M.length;s++)d=M[s],S[d]&&S[d].hot._selfAccepted&&v[d]!==x&&!S[d].hot._selfInvalidated&&H.push({module:d,parents:S[d].parents.slice(),errorHandler:S[d].hot._selfAccepted});l("dispose"),Object.keys(w).forEach((function(e){!1===w[e]&&function(e){delete C[e]}(e)}));var L,k,q=M.slice();for(;q.length>0;)if(d=q.pop(),h=S[d]){var J={},T=h.hot._disposeHandlers;for(u=0;u<T.length;u++)(n=T[u])(J);for(a[d]=J,h.hot.active=!1,delete S[d],delete b[d],u=0;u<h.children.length;u++){var U=S[h.children[u]];U&&((A=U.parents.indexOf(d))>=0&&U.parents.splice(A,1))}}for(d in b)if(Object.prototype.hasOwnProperty.call(b,d)&&(h=S[d]))for(k=b[d],u=0;u<k.length;u++)L=k[u],(A=h.children.indexOf(L))>=0&&h.children.splice(A,1);l("apply"),void 0!==y&&(r=y,y=void 0);for(d in m=void 0,v)Object.prototype.hasOwnProperty.call(v,d)&&(e[d]=v[d]);var F=null;for(d in b)if(Object.prototype.hasOwnProperty.call(b,d)&&(h=S[d])){k=b[d];var G=[];for(s=0;s<k.length;s++)if(L=k[s],n=h.hot._acceptedDependencies[L]){if(-1!==G.indexOf(n))continue;G.push(n)}for(s=0;s<G.length;s++){n=G[s];try{n(k)}catch(e){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:d,dependencyId:k[s],error:e}),i.ignoreErrored||F||(F=e)}}}for(s=0;s<H.length;s++){var N=H[s];d=N.module,c=N.parents,o=d;try{R(d)}catch(e){if("function"==typeof N.errorHandler)try{N.errorHandler(e)}catch(t){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:d,error:t,originalError:e}),i.ignoreErrored||F||(F=t),F||(F=e)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:d,error:e}),i.ignoreErrored||F||(F=e)}}if(F)return l("fail"),Promise.reject(F);if(g)return t(i).then((function(e){return M.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return l("idle"),new Promise((function(e){e(M)}))}(t=t||{})}function I(){if(g)return m||(m={}),g.forEach(E),g=void 0,!0}function E(t){Object.prototype.hasOwnProperty.call(m,t)||(m[t]=e[t])}var S={},C={0:0},D=[];function R(t){if(S[t])return S[t].exports;var i=S[t]={i:t,l:!1,exports:{},hot:h(t),parents:(u=c,c=[],u),children:[]};return e[t].call(i.exports,i,i.exports,function(e){var t=S[e];if(!t)return R;var i=function(i){return t.hot.active?(S[i]?-1===S[i].parents.indexOf(e)&&S[i].parents.push(e):(c=[e],o=i),-1===t.children.indexOf(i)&&t.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+e),c=[]),R(i)},n=function(e){return{configurable:!0,enumerable:!0,get:function(){return R[e]},set:function(t){R[e]=t}}};for(var s in R)Object.prototype.hasOwnProperty.call(R,s)&&"e"!==s&&"t"!==s&&Object.defineProperty(i,s,n(s));return i.e=function(e){return"ready"===p&&l("prepare"),M++,R.e(e).then(t,(function(e){throw t(),e}));function t(){M--,"prepare"===p&&(v[e]||j(e),0===M&&0===b&&O())}},i.t=function(e,t){return 1&t&&(e=i(e)),R.t(e,-2&t)},i}(t)),i.l=!0,i.exports}R.m=e,R.c=S,R.d=function(e,t,i){R.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},R.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},R.t=function(e,t){if(1&t&&(e=R(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(R.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)R.d(i,n,function(t){return e[t]}.bind(null,n));return i},R.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return R.d(t,"a",t),t},R.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},R.p="",R.h=function(){return r};var A=window.webpackJsonp=window.webpackJsonp||[],H=A.push.bind(A);A.push=t,A=A.slice();for(var L=0;L<A.length;L++)t(A[L]);var k=H;D.push([10,2]),i()}([,,,,,,,,,,function(e,t,i){"use strict";(0,i(11).init)()},function(e,t,i){"use strict";var n=i(12);e.exports={init:function(){window.onload=function(){var e=new n,t=document.querySelector(".startPage"),i=document.querySelector(".restartPage"),o=document.querySelector(".start-btn"),s=document.querySelector(".restart-btn"),r=document.querySelector(".score");t.style.display="flex",i.style.display="none",o.addEventListener("click",(function(){t.style.display="none",e.start()})),s.addEventListener("click",(function(){i.style.display="none",e.restart()})),e.failCallback=function(e){i.style.display="flex",r.innerHTML=e}}}}},function(e,t,i){"use strict";var n=i(1),o=i(13),s=new(i(14)),r=i(15),a=i(2),c=a.OBJLoader,u=a.MTLLoader;function h(){this.scene=new n.Scene,this.group=new n.Group,this.scene.add(this.group),this.camera=new n.OrthographicCamera(window.innerWidth/-60,window.innerWidth/60,window.innerHeight/60,window.innerHeight/-60,.1,5e3),this.camera.position.set(100,100,100),this.camera.lookAt(new n.Vector3(0,0,0)),this.cameraPos={current:new n.Vector3(0,0,0),next:new n.Vector3},this.cameraSpeed={x:0,y:0,z:0},this.CAMERA_MOVE_TIME=40,this.groupPos={current:null,next:null},this.renderer=new n.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.antialias=!0,document.body.appendChild(this.renderer.domElement),this.canvas=this.renderer.domElement;var e=new n.DirectionalLight(16777215,.4);e.position.set(2,5,-2),e.castShadow=!0,e.shadow.camera.near=0,e.shadow.camera.far=100;e.shadow.camera.left=-15,e.shadow.camera.right=15,e.shadow.camera.top=15,e.shadow.camera.bottom=-15,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,this.scene.add(e);var t=new n.AmbientLight(16777215,.6);this.scene.add(t),this.config={jumpTopRadius:.3,jumpBottomRadius:.5,jumpHeight:2,jumpColor:16777215,cubeX:4,cubeY:2,cubeZ:4,cubeColor:65535,cylinderRadius:2,cylinderHeight:2,cylinderColor:65280,cubeMaxLen:6,cubeMinDis:2,cubeMaxDis:5,modelConfig:new o},this.mouse={down:this.isPC()?"mousedown":"touchstart",up:this.isPC()?"mouseup":"touchend"},this.cubes=[],this.models=[],window.models=this.models,this.jumper=null,this.JUMP_FRAME_NUM=40,this.ADDSPEED=.005,this.accelerate={x:0,y:.02,z:0},this.speed={x:0,y:this.accelerate.y*this.JUMP_FRAME_NUM/2,z:0},this.mouseState=0,this.currentFrame=-1,this.score=0,this.failCallback=function(){},this.audioManager=new r,window.jumper=this.jumper,window.models=this.models,window.camera=this.camera,window.cameraPos=this.cameraPos,window.group=this.group}h.prototype.constructor=h,Object.assign(h.prototype,{createCube:function(){var e=Math.random()>.5?"cube":"cylinder",t="cube"===e?new n.CubeGeometry(this.config.cubeX,this.config.cubeY,this.config.cubeZ):new n.CylinderGeometry(this.config.cylinderRadius,this.config.cylinderRadius,this.config.cylinderHeight,100),i=("cube"===e?this.config.cubeColor:this.config.cylinderColor,new n.MeshLambertMaterial({color:0,transparent:!0,opacity:0})),o=new n.Mesh(t,i),s=Math.random()>.5?"zDir":"xDir";if(this.cubes.length){var r=this.getRandomValue(this.config.cubeMinDis,this.config.cubeMaxDis),a=this.cubes[this.cubes.length-1];if("zDir"===s)if("cube"===e)if(a.geometry instanceof n.CubeGeometry){var c={x:a.position.x,y:a.position.y,z:a.position.z-r-this.config.cubeZ};this.createModel(c),o.position.set(c.x,c.y,c.z)}else{var u={x:a.position.x,y:a.position.y,z:a.position.z-r-this.config.cylinderRadius-this.config.cubeZ/2};this.createModel(u),o.position.set(u.x,u.y,u.z)}else if(a.geometry instanceof n.CubeGeometry){var h={x:a.position.x,y:a.position.y,z:a.position.z-r-this.config.cylinderRadius-this.config.cubeZ/2};this.createModel(h),o.position.set(h.x,h.y,h.z)}else{var d={x:a.position.x,y:a.position.y,z:a.position.z-r-2*this.config.cylinderRadius};this.createModel(d),o.position.set(d.x,d.y,d.z)}else if("xDir"===s)if("cube"===e)if(a.geometry instanceof n.CubeGeometry){var p={x:a.position.x+r+this.config.cubeX,y:a.position.y,z:a.position.z};this.createModel(p),o.position.set(p.x,p.y,p.z)}else{var l={x:a.position.x+r+this.config.cubeX/2+this.config.cylinderRadius,y:a.position.y,z:a.position.z};this.createModel(l),o.position.set(l.x,l.y,l.z)}else if(a.geometry instanceof n.CubeGeometry){var f={x:a.position.x+r+this.config.cylinderRadius+this.config.cubeX/2,y:a.position.y,z:a.position.z};this.createModel(f),o.position.set(f.x,f.y,f.z)}else{var m={x:a.position.x+r+2*this.config.cylinderRadius,y:a.position.y,z:a.position.z};this.createModel(m),o.position.set(m.x,m.y,m.z)}}else this.createModel({x:0,y:0,z:0}),o.position.set(0,0,0);this.testPosition(o.position),this.cubes.push(o),this.group.add(o),this._render(),this.cubes.length>this.config.cubeMaxLen&&this.group.remove(this.cubes.shift());this.cubes.length>1?this._updateCameraPos():this.camera.lookAt(this.cameraPos.current)},createJumper:function(){var e=new n.CylinderGeometry(this.config.jumpTopRadius,this.config.jumpBottomRadius,1.7,100),t=new n.MeshLambertMaterial({color:this.config.jumpColor}),i=new n.Mesh(e,t);e.translate(0,this.config.jumpHeight/2,0),i.position.set(0,this.config.jumpHeight/2,0),i.castShadow=!0,i.receiveShadow=!0,this.jumper=i,this.group.add(i),this._render()},createModel:function(e){var t=this,i=this.getRandomItem(this.config.modelConfig.objList).ele,n=Object.create(this.config.modelConfig[i]);n.position=e;var o=function(e){e.children.forEach((function(e){e.traverse((function(e){"Mesh"===e.type&&(e.castShadow=!0,e.receiveShadow=!0)}))})),e.scale.x=n.scale.x,e.scale.y=n.scale.y,e.scale.z=n.scale.z,e.rotation.x=n.rotation.x*Math.PI,e.rotation.y=n.rotation.y*Math.PI,e.rotation.z=n.rotation.z*Math.PI,e.position.x=n.position.x,e.position.y=n.position.y,e.position.z=n.position.z,t.group.add(e),t.models.push(e),t.models.length>t.config.cubeMaxLen&&(t.removeModel(t.models[0]),t.models.shift())};(new u).load("./res/obj/"+i+".mtl",(function(e){e.preload();var t=new c;t.setMaterials(e),t.load("./res/obj/"+i+".obj",o)}))},removeModel:function(e){e.children.forEach((function(e){e.traverse((function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material instanceof Array?e.material.forEach((function(e){e.dispose()})):e.material.dispose())}))})),this.group.remove(e)},createPlane:function(){var e=new n.PlaneGeometry(100,100,10,10),t=new n.MeshLambertMaterial({color:16777011,wireframe:!1}),i=new n.Mesh(e,t);i.position.set(0,-this.config.cubeY/2,0),i.rotation.x=-.5*Math.PI,i.receiveShadow=!0,this.scene.add(i),this.audioManager.play("start")},_render:function(){this.renderer.render(this.scene,this.camera)},_updateCameraPos:function(){var e=this.cubes[this.cubes.length-2],t=this.cubes[this.cubes.length-1],i=t.position.x-e.position.x,n=t.position.z-e.position.z;this.groupPos.current={x:this.group.position.x,y:this.group.position.y,z:this.group.position.z},this.groupPos.next={x:this.group.position.x-i,y:0,z:this.group.position.z-n},this._updateCamera(0)},_updateCamera:function(e){if(!(e>this.CAMERA_MOVE_TIME)){e+=1;var t=this.getDirection();if("x"===t){var i=s.Quart.easeInOut(e,this.groupPos.current.x,this.groupPos.next.x-this.groupPos.current.x,this.CAMERA_MOVE_TIME);this.group.position.x=i}else if("z"===t){var n=s.Quart.easeInOut(e,this.groupPos.current.z,this.groupPos.next.z-this.groupPos.current.z,this.CAMERA_MOVE_TIME);this.group.position.z=n}this._render();var o=this;requestAnimationFrame((function(){o._updateCamera(e)}))}},_registerEvent:function(){this.canvas.addEventListener(this.mouse.down,this._onMouseDown.bind(this)),this.canvas.addEventListener(this.mouse.up,this._onMouseUp.bind(this)),window.addEventListener("resize",this._onwindowResize.bind(this),!1)},_destoryEvent:function(){this.canvas.removeEventListener(this.mouse.down,this._onMouseDown.bind(this)),this.canvas.removeEventListener(this.mouse.up,this._onMouseUp.bind(this)),window.removeEventListener("resize",this._onwindowResize.bind(this),!1)},_onwindowResize:function(){this.camera.left=window.innerWidth/-80,this.camera.right=window.innerWidth/80,this.camera.top=window.innerHeight/80,this.camera.bottom=window.innerHeight/-80,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},_onMouseDown:function(){this.mouseState=-1,this.jumper.scale.y>.2&&(this.jumper.scale.y-=.01,this.speed.x+=this.ADDSPEED,this.speed.z=this.getNextDistance().z/this.JUMP_FRAME_NUM,this._render(),requestAnimationFrame(function(){-1===this.mouseState&&this._onMouseDown()}.bind(this))),this.audioManager.play("push")},_onMouseUp:function(){var e=this;if(this.mouseState=1,this.audioManager.stop("push"),this.jumper.position.y>=this.config.jumpHeight/2){this.currentFrame=this.currentFrame+1,"x"===this.getDirection()?(this.jumper.position.x+=this.speed.x,this.jumper.position.y+=this.speed.y,this.jumper.position.z+=this.speed.z,this.jumper.rotation.z=this.getRotation()):(this.jumper.position.z-=this.speed.x,this.jumper.position.y+=this.speed.y,this.jumper.position.x+=this.speed.z,this.jumper.rotation.x=this.getRotation()),this._render(),this.speed.y-=this.accelerate.y,this.jumper.scale.y<1&&(this.jumper.scale.y+=.02),requestAnimationFrame(function(){this._onMouseUp()}.bind(this))}else{var t=this.getJumpState();if(this.resetJumper(),1===t);else if(2===t)this._updateScore(1),this.createCube(),this.audioManager.play("success");else if(3===t)this._updateScore(3),this.createCube(),this.audioManager.play("success"),this.audioManager.play(this.getRandomItem(["cool","perfect"]).ele);else if(-2===t){this.audioManager.play("fail"),function t(){e.jumper.position.y>=-e.config.jumpHeight/2&&(e.jumper.position.y-=.06,e._render(),requestAnimationFrame(t))}(),this.failCallback&&setTimeout((function(){e.failCallback(e.score)}),1e3)}else this.audioManager.play("fail"),this.failingAnimation(t),this.failCallback&&setTimeout((function(){e.failCallback(e.score)}),1e3)}},_initScore:function(){var e=document.querySelector("#score");e?e.innerHTML="0":((e=document.createElement("div")).id="score",e.innerHTML="0",document.body.appendChild(e))},_updateScore:function(e){var t=document.querySelector(".MyToast");t.innerHTML="+"+e,t.classList.remove("disappear"),setTimeout((function(){t.classList.add("disappear")}),250),this.score+=e,document.getElementById("score").innerHTML=this.score},start:function(){this.createPlane(),this.createCube(),this.createCube(),this.createJumper(),this._registerEvent(),this._initScore()},restart:function(){for(var e=0,t=this.cubes.length;e<t;e++)this.group.remove(this.cubes[e]);for(e=0,t=this.models.length;e<t;e++)this.removeModel(this.models[e]);this.models.length=0,this.group.remove(this.jumper),this.group.position.x=0,this.group.position.z=0,this.cameraPos={current:new n.Vector3(0,0,0),next:new n.Vector3},this.cubes=[],this.jumper=null,this.mouseState=0,this.xspeed=0,this.yspeed=0,this.score=0,this.createCube(),this.createCube(),this.createJumper(),this._initScore(),this.audioManager.play("start")},resetJumper:function(){this.currentFrame=-1,this.jumper.scale.y=1,this.jumper.position.y=this.config.jumpHeight/2,this.jumper.rotation.x=0,this.jumper.rotation.z=0,this.speed.x=0,this.speed.y=this.accelerate.y*this.JUMP_FRAME_NUM/2,this.speed.z=0},stop:function(){},getRandomValue:function(e,t){return Math.floor(Math.random()*(t-e))+e},getRandomItem:function(e){var t=this.getRandomValue(0,e.length);return{i:t,ele:e[t]}},failingAnimation:function(e){var t,i,n="z"===this.getDirection()?"x":"z";if(-1===e?(t=this.jumper.rotation[n]-.1,i=this.jumper.rotation[n]>-Math.PI/2):(t=this.jumper.rotation[n]+.1,i=this.jumper.rotation[n]<Math.PI/2),i)this.jumper.rotation[n]=t,this._render(),requestAnimationFrame(function(){this.failingAnimation(e)}.bind(this));else{var o=this;!function e(){o.jumper.position.y>=-o.config.jumpHeight/2&&(o.jumper.position.y-=.06,o._render(),requestAnimationFrame(e))}()}},getJumpState:function(){var e=this.config.jumpBottomRadius,t=this.getCurrentDistance(),i=t.d,n=t.d1,o=t.d2,s=t.d3,r=t.d4;return i<=n?1:i>n&&Math.abs(i-n)<=e?-1:Math.abs(i-n)>e&&i<o&&Math.abs(i-o)>=e?-2:i<o&&Math.abs(i-o)<e?-3:i>o&&i<=r?i>=s-.2&&i<=s+.2?3:2:i>r&&Math.abs(i-r)<e?-1:-2},getCurrentDistance:function(){var e,t,i,o,s,r=this.cubes[this.cubes.length-2],a=r.position,c=r.geometry instanceof n.CubeGeometry?"cube":"cylinder",u=this.cubes[this.cubes.length-1],h=u.position,d=u.geometry instanceof n.CubeGeometry?"cube":"cylinder",p=this.jumper.position;return"cube"===c?"cube"===d?a.x===h.x?(e=Math.abs(p.z),t=Math.abs(a.z-this.config.cubeZ/2),i=Math.abs(h.z+this.config.cubeZ/2),o=Math.abs(h.z),s=Math.abs(h.z-this.config.cubeZ/2)):(e=Math.abs(p.x),t=Math.abs(a.x+this.config.cubeX/2),i=Math.abs(h.x-this.config.cubeX/2),o=Math.abs(h.x),s=Math.abs(h.x+this.config.cubeX/2)):a.x===h.x?(e=Math.abs(p.z),t=Math.abs(a.z-this.config.cubeZ/2),i=Math.abs(h.z+this.config.cylinderRadius),o=Math.abs(h.z),s=Math.abs(h.z-this.config.cylinderRadius)):(e=Math.abs(p.x),t=Math.abs(a.x+this.config.cubeX/2),i=Math.abs(h.x-this.config.cylinderRadius),o=Math.abs(h.x),s=Math.abs(h.x+this.config.cylinderRadius)):"cube"===d?a.x===h.x?(e=Math.abs(p.z),t=Math.abs(a.z-this.config.cylinderRadius),i=Math.abs(h.z+this.config.cubeZ/2),o=Math.abs(h.z),s=Math.abs(h.z-this.config.cubeZ/2)):(e=Math.abs(p.x),t=Math.abs(a.x+this.config.cylinderRadius),i=Math.abs(h.x-this.config.cubeX/2),o=Math.abs(h.x),s=Math.abs(h.x+this.config.cubeX/2)):a.x===h.x?(e=Math.abs(p.z),t=Math.abs(a.z-this.config.cylinderRadius),i=Math.abs(h.z+this.config.cylinderRadius),o=Math.abs(h.z),s=Math.abs(h.z-this.config.cylinderRadius)):(e=Math.abs(p.x),t=Math.abs(a.x+this.config.cylinderRadius),i=Math.abs(h.x-this.config.cylinderRadius),o=Math.abs(h.x),s=Math.abs(h.x+this.config.cylinderRadius)),{d:e,d1:t,d2:i,d3:o,d4:s}},getNextDistance:function(){var e=this.cubes[this.cubes.length-2],t=(e.position,e.geometry,n.CubeGeometry,this.cubes[this.cubes.length-1]),i=t.position,o=(t.geometry,n.CubeGeometry,this.jumper.position),s=this.getDirection(),r={x:0,y:0,z:0};return"x"===s?r.z=i.z-o.z:"z"===s&&(r.z=i.x-o.x),r},getDirection:function(){var e;if(this.cubes.length>1){var t=this.cubes[this.cubes.length-2],i=this.cubes[this.cubes.length-1];t.position.z===i.position.z&&(e="x"),t.position.x===i.position.x&&(e="z")}return e},getRotation:function(){var e=this.currentFrame;return-s.Quint.easeInOut(e,0,2*Math.PI,40)},testPosition:function(e){(isNaN(e.x)||isNaN(e.y)||isNaN(e.z))&&console.log("position incorrectÔºÅ")},isPC:function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){i=!1;break}return i}}),e.exports=h},function(e,t,i){"use strict";var n={scale:{x:.4,y:.415,z:.415},rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0}},o=function(){};o.prototype={objList:["shoutixiang","shudun","x_hezi5","q_hezi4","d_hezi4","d_hezi5","pingtai1","huaban","dangao","x_fangzhuo","x_huaban","x_yuanzhu1","x_xigua","q_shudun","d_tiaotai","d_xiaoniao","d_pixiang","d_yuanzhu1","cheng","cd"],d_xiaoniao:{scale:n.scale,rotation:{x:0,y:-.5,z:0},position:{x:0,y:0,z:0}},shoutixiang:{scale:n.scale,rotation:{x:0,y:-.5,z:0},position:{x:0,y:0,z:0}},d_pixiang:{scale:n.scale,rotation:{x:0,y:-.5,z:0},position:{x:0,y:0,z:0}},shudun:{scale:n.scale,rotation:{x:0,y:-.5,z:0},position:{x:0,y:0,z:0}},x_hezi5:{scale:{x:.4,y:.415,z:.4},rotation:n.rotation,position:n.position},q_hezi4:{scale:{x:.4,y:.415,z:.4},rotation:n.rotation,position:n.position},d_hezi4:{scale:{x:.4,y:.415,z:.4},rotation:n.rotation,position:n.position},d_hezi5:{scale:{x:.4,y:.415,z:.4},rotation:n.rotation,position:n.position},pingtai1:n,huaban:n,dangao:n,x_fangzhuo:n,x_huaban:n,x_yuanzhu1:n,x_xigua:n,q_shudun:n,d_tiaotai:n,d_yuanzhu1:n,cheng:n,cd:n},e.exports=o},function(e,t,i){"use strict";var n=function(){};n.prototype={Linear:function(e,t,i,n){return i*e/n+t},Quad:{easeIn:function(e,t,i,n){return i*(e/=n)*e+t},easeOut:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},easeInOut:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}},Cubic:{easeIn:function(e,t,i,n){return i*(e/=n)*e*e+t},easeOut:function(e,t,i,n){return i*((e=e/n-1)*e*e+1)+t},easeInOut:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}},Quart:{easeIn:function(e,t,i,n){return i*(e/=n)*e*e*e+t},easeOut:function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},easeInOut:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t}},Quint:{easeIn:function(e,t,i,n){return i*(e/=n)*e*e*e*e+t},easeOut:function(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},easeInOut:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t}},Sine:{easeIn:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},easeOut:function(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t},easeInOut:function(e,t,i,n){return-i/2*(Math.cos(Math.PI*e/n)-1)+t}},Expo:{easeIn:function(e,t,i,n){return 0==e?t:i*Math.pow(2,10*(e/n-1))+t},easeOut:function(e,t,i,n){return e==n?t+i:i*(1-Math.pow(2,-10*e/n))+t},easeInOut:function(e,t,i,n){return 0==e?t:e==n?t+i:(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t}},Circ:{easeIn:function(e,t,i,n){return-i*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOut:function(e,t,i,n){return i*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOut:function(e,t,i,n){return(e/=n/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},Elastic:{easeIn:function(e,t,i,n,o,s){var r;return 0==e?t:1==(e/=n)?t+i:(void 0===s&&(s=.3*n),!o||o<Math.abs(i)?(r=s/4,o=i):r=s/(2*Math.PI)*Math.asin(i/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/s)+t)},easeOut:function(e,t,i,n,o,s){var r;return 0==e?t:1==(e/=n)?t+i:(void 0===s&&(s=.3*n),!o||o<Math.abs(i)?(o=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*e)*Math.sin((e*n-r)*(2*Math.PI)/s)+i+t)},easeInOut:function(e,t,i,n,o,s){var r;return 0==e?t:2==(e/=n/2)?t+i:(void 0===s&&(s=n*(.3*1.5)),!o||o<Math.abs(i)?(o=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/s)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/s)*.5+i+t)}},Back:{easeIn:function(e,t,i,n,o){return void 0===o&&(o=1.70158),i*(e/=n)*e*((o+1)*e-o)+t},easeOut:function(e,t,i,n,o){return void 0===o&&(o=1.70158),i*((e=e/n-1)*e*((o+1)*e+o)+1)+t},easeInOut:function(e,t,i,n,o){return void 0===o&&(o=1.70158),(e/=n/2)<1?i/2*(e*e*((1+(o*=1.525))*e-o))+t:i/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+t}},Bounce:{easeIn:function(e,t,i,o){return i-n.Bounce.easeOut(o-e,0,i,o)+t},easeOut:function(e,t,i,n){return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOut:function(e,t,i,o){return e<o/2?.5*n.Bounce.easeIn(2*e,0,i,o)+t:.5*n.Bounce.easeOut(2*e-o,0,i,o)+.5*i+t}}},e.exports=n},function(e,t,i){"use strict";var n=function(){this.instances={},this.isOk=0,this.audioConfig=["cool","perfect","success","fail","start","push","push_loop"],this.SoundJS=createjs.Sound,this._registerMusic(),this._initMusicInstance()};Object.assign(n.prototype,{_registerMusic:function(){var e=this;this.SoundJS.alternateExtensions=["mp3"],this.SoundJS.on("fileload",(function(){e.isOk+=1,6==e.isOk&&console.log("Loading Sound ... 100%")}));for(var t=0;t<this.audioConfig.length;t++){var i=this.audioConfig[t];this.SoundJS.registerSound("./res/audio/"+i+".mp3",i,t)}},_initMusicInstance:function(){for(var e=0;e<this.audioConfig.length;e++){var t=this.audioConfig[e],i=this.SoundJS.play("./res/audio/"+t+".mp3");this.instances[t]=i}},play:function(e){var t=this.instances[e];t.volume=.7,"bg"===e?t.volume=.2:"cool"!==e&&"perfect"!==e||(t.volume=1),t.play()},stop:function(e){this.instances[e].stop()},replay:function(e){this.instances[e].play()}}),e.exports=n}]);